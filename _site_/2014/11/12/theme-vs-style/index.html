<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Theme vs Style &middot; Chris Banes
    
  </title>
  
  
  
  <meta name="twitter:site" content="@chrisbanes">
  <meta property="og:type" content="article">
  
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image:src" content="http://chris.banes.me/content/images/2014/11/theme-vs-style.png">
  <meta name="og:image" content="http://chris.banes.me/content/images/2014/11/theme-vs-style.png">
  
  
  
  <meta property="og:title" content="Theme vs Style">
  <meta property="twitter:title" content="Theme vs Style">
  

  
  <meta name="twitter:description" content="Android 5.0 Lollipop brings with it new functionality which allows you to specify an override theme for a View (and any descendents). Let’s have a look at how and why you would use it.

">
  <meta property="og:description" content="Android 5.0 Lollipop brings with it new functionality which allows you to specify an override theme for a View (and any descendents). Let’s have a look at how and why you would use it.

">
  <meta name="description" content="Android 5.0 Lollipop brings with it new functionality which allows you to specify an override theme for a View (and any descendents). Let’s have a look at how and why you would use it.

">
  

  <meta name="theme-color" content="#00796B">

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/site.css">
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira+Sans|Fira+Mono|Fjalla+One">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/content/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/content/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="/content/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="/content/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/content/favicon-16x16.png" sizes="16x16" />
  <meta name="application-name" content="Chris Banes"/>
  <meta name="msapplication-TileColor" content="#00796B" />
  <meta name="msapplication-TileImage" content="/content/mstile-144x144.png" />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">

      <a href="/" title="Link to homepage for Chris Banes"><img src="/content/images/me.jpg" width="80" alt="Chris Banes logo" class="panel-cover__logo logo" /></a>

      <h1>
        <a href="/">
          Chris Banes
        </a>
      </h1>
      <p class="lead">I work as a DPE in the Android Developer Relations team. This is my personal blog and any views expressed here are mine, and not my employers.</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
      
        
      
        
      
        
      

          </nav>


      <nav class="sidebar-social">
  <ul class="navigation">


  <!-- Twitter -->
  <li class="social-item twitter">
    <a href="https://twitter.com/MikelAlegria" title="Mike alegria on Twitter" target="_blank">
      <i class='icon fi-social-twitter'></i>
      <span class="label">Twitter</span>
    </a>
  </li>

  <!-- Google+ -->
  <!-- <li class="social-item gplus">
    <a href="http://plus.google.com/103829716466878605055?rel=author" title="+ChrisBanes" target="_blank">
      <i class='icon fi-social-google-plus'></i>
      <span class="label">Google+</span>
    </a>
  </li> -->

  <!-- GitHub -->
  <li class="social-item github">
    <a href="http://github.com/mikel063093" title="@mikel063093 on GitHub" target="_blank">
      <i class='icon fi-social-github'></i>
      <span class="label">GitHub</span>
    </a>
  </li>

  <!-- StackOverflow -->
  <!-- <li class="social-item stackoverflow">
    <a href="http://stackoverflow.com/users/474997/chris-banes" title="Chris Banes on StackOverflow" target="_blank">
      <i class='icon fi-social-stack-overflow'></i>
      <span class="label">StackOverflow</span>
    </a>
  </li> -->

  <!-- Foursquare -->
  <!-- <li class="social-item foursquare">
    <a href="http://foursquare.com/chrisbanes" title="Chris Banes on foursquare" target="_blank">
      <i class='icon fi-social-foursquare'></i>
      <span class="label">foursquare</span>
    </a>
  </li> -->

    <!-- LinkedIn -->
    <li class="social-item linkedin">
      <a href="http://co.linkedin.com/in/mikealegria/" title="Miguel Alegria on LinkedIn" target="_blank">
        <i class='icon fi-social-linkedin'></i>
        <span class="label">LinkedIn</span>
      </a>
    </li>

  </ul>
</nav>





  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Theme vs Style</h1>
  <span class="post-date">12 Nov 2014</span>
  
  <img src="/content/images/2014/11/theme-vs-style.png" alt="Theme vs Style">
  

  <p>Android 5.0 Lollipop brings with it new functionality which allows you to specify an override theme for a View (and any descendents). Let’s have a look at how and why you would use it.</p>

<h2 id="why">Why?</h2>

<p>You’ve probably already been using this functionality for a while without knowing: <code>Theme.Holo.Light.DarkActionBar</code>.</p>

<p>Think about the Light.DarkActionBar theme for a second. It’s a light theme for your content (background is light and the foreground is dark), but the action bar use a dark theme (dark background with light foreground color).</p>

<p>Without being able to supply a seperate theme, you would need to manually set the text color and other foreground colors to some sort of inverse. Eugh.</p>

<p>That is where the old <code>actionBarWidgetTheme</code> attribute came in, it allowed you to specify a theme to be used <strong>only</strong> for your action bar. Here’s an excerpt from the platform DarkActionBar theme:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">&quot;Theme.Holo.Light.DarkActionBar&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;android:actionBarWidgetTheme&quot;</span><span class="nt">&gt;</span>@android:style/Theme.Holo<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span></code></pre></div>

<p>Thus making your action bar using the dark theme.</p>

<h3 id="underlying-functionality">Underlying functionality</h3>

<p>So how do this work under-the-covers? Simple, it’s the <a href="https://developer.android.com/reference/android/view/ContextThemeWrapper.html">ContextThemeWrapper</a> class which has been available since API v1. It’s a pretty simple class and the clue to what it does is in the name:</p>

<p>It wraps an existing Context (say your Activity), and then  <strong>overlays</strong> a new theme on top of that Context’s theme. This is important to understand as this leads on to…</p>

<h2 id="themeoverlay">ThemeOverlay</h2>

<p>You may have seen these themes in the Lollipop SDK. There are two main overlays:</p>

<ul>
  <li>ThemeOverlay.Material.Light</li>
  <li>ThemeOverlay.Material.Dark</li>
</ul>

<p>So what exactly are these? Well again, the clue is in the name, and they are directly match to how ContextThemeWrapper works.</p>

<p>They are special themes which overlay the normal <code>Theme.Material</code> themes, overwriting relevant attributes to make them either light/dark.</p>

<h3 id="themeoverlay--actionbar">ThemeOverlay + ActionBar</h3>

<p>The keen eyed of you will also have seen the ActionBar ThemeOverlay derivatives:</p>

<ul>
  <li>ThemeOverlay.Material.Light.ActionBar</li>
  <li>ThemeOverlay.Material.Dark.ActionBar</li>
</ul>

<p>These should only be used with the Action Bar via the new <code>actionBarTheme</code> attribute, or directly set on your <a href="https://developer.android.com/reference/android/widget/Toolbar.html">Toolbar</a> (see below).</p>

<p>The only things these currently do differently to their parents is that they change the <code>colorControlNormal</code> to be <code>android:textColorPrimary</code>, thus making any text and icons opaque.</p>

<h2 id="androidtheme">android:theme</h2>

<p>Let’s get back to the new Lollipop functionality. As mentioned you can now specify a theme directly onto a View in your layout.  The most common use of this will (probably) be using Toolbar:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;Toolbar</span>  
    <span class="na">android:layout_height=</span><span class="s">&quot;?android:attr/actionBarSize&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;match_parent&quot;</span>
    <span class="na">android:background=</span><span class="s">&quot;?android:attr/colorPrimaryDark&quot;</span>
    <span class="na">android:theme=</span><span class="s">&quot;@android:style/ThemeOverlay.Material.Dark.ActionBar&quot;</span> <span class="nt">/&gt;</span></code></pre></div>

<p>Hopefully you can now see how it all comes together. We have now made the Toolbar have a dark theme, ensuring that it’s content is light in color and has contrast againt the dark background.</p>

<p>One thing to note is that <code>android:theme</code> in Lollipop propogates to all children declared in the layout:</p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;LinearLayout</span>
    <span class="na">android:theme=</span><span class="s">&quot;@android:style/ThemeOverlay.Material.Dark&quot;</span><span class="nt">&gt;</span>
    
    <span class="c">&lt;!-- Anything here will also have a dark theme --&gt;</span>
    
<span class="nt">&lt;/LinearLayout&gt;</span></code></pre></div>

<p>Your children can set their own theme if needed.</p>

<h2 id="example">Example</h2>

<p>Let’s wrap this up with a question that I’ve been asked recently:</p>

<blockquote>
  <p>How do I set android:colorEdgeEffect so that it only takes effect on a single view?</p>
</blockquote>

<p>The <code>colorEdgeEffect</code> attribute is a new theme attribute in Android 5.0, which is used to customize the color of the overscroll effect for lists, etc.</p>

<p>As this is a theme attribute you can not just set it directly on the view. Instead we need to use <code>android:theme</code> with a custom ThemeOverlay. Our custom overlay just sets <code>android:colorEdgeEffect</code> to be red. We then set this theme on to the view so that it takes effect.</p>

<p><strong>res/values/themes.xml</strong></p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;style</span> <span class="na">name=</span><span class="s">&quot;RedThemeOverlay&quot;</span> <span class="na">parent=</span><span class="s">&quot;android:ThemeOverlay.Material&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;android:colorEdgeEffect&quot;</span><span class="nt">&gt;</span>#FF0000<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/style&gt;</span></code></pre></div>

<p><strong>res/layout/fragment_list.xml</strong></p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;ListView</span>
    <span class="err">...</span>
    <span class="na">android:theme=</span><span class="s">&quot;RedThemeOverlay&quot;</span> <span class="nt">/&gt;</span></code></pre></div>

<p>Just to note, colorEdgeEffect was just an example here, this technique can be used with <strong>all</strong> theme attributes.</p>

<h2 id="theme-vs-style">Theme vs Style</h2>

<p>So what exactly is the difference? Well they are both declared in exactly the same way (which you already know), the difference comes in how they’re used.</p>

<p>Themes are meant to be the global source of styling for your app. The new functionality doesn’t change that, it just allows you to tweak it per view.</p>

<p>Styles are meant to be applied at a view level. Internally, when you set <code>style</code> on a View, the LayoutInflater will read the style and apply it to the <a href="https://developer.android.com/reference/android/util/AttributeSet.html">AttributeSet</a> before any explicit attributes (this allows you to override style values on a view).</p>

<p>Values in an attribute set can reference values from the View’s theme.</p>

<p>TL;DR: Themes are global, styles are local.</p>

<h2 id="appcompat">AppCompat</h2>

<p>So how does AppCompat fit into this? Well it obviously backports some of the new color theme attributes.</p>

<p>It also backports the <code>android:theme</code> functionality for certain widgets, currently <strong>only</strong> <code>android.support.v7.widget.Toolbar</code>.</p>

<p>See my <a href="https://chris.banes.me/2014/10/17/appcompat-v21/">AppCompat v21</a> blog post for more information.</p>

</div>


<section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'chrisbanes'; // required: replace example with your forum shortname
      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3 style="display: inline;"><a href="/2014/10/20/palette-v21/">Palette v21</a></h3>
        <small>20 Oct 2014</small>
      </li>
    
      <li>
        <h3 style="display: inline;"><a href="/2014/10/17/appcompat-v21/">appcompat v21: material design for pre-Lollipop devices!</a></h3>
        <small>17 Oct 2014</small>
      </li>
    
  </ul>
</div>

    </div>

      <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-41899870-1', 'auto');
    ga('send', 'pageview');
  </script>


  </body>
</html>
